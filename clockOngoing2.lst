
ASEM-51 V1.3                                         Copyright (c) 2002 by W.W. Heinz                                         PAGE 1





       MCS-51 Family Macro Assembler   A S E M - 5 1   V 1.3
       =====================================================



	Source File:	C:\AK Nahin\Academic Resources\24 hour clock with assembly language for 8052\clockOngoing2.asm
	Object File:	C:\AK Nahin\Academic Resources\24 hour clock with assembly language for 8052\clockOngoing2.hex
	List File:	C:\AK Nahin\Academic Resources\24 hour clock with assembly language for 8052\clockOngoing2.lst



 Line  I  Addr  Code            Source

    1:		N      0000	ORG 	00H
    2:	  0000	75 81 70	MOV	SP, #70H
    3:	  0003	75 D0 00	MOV 	PSW, #00H
    4:		B      00B3	RS	EQU P3.3
    5:		B      00B4	RW 	EQU P3.4
    6:		B      00B5	ENBL	EQU P3.5
    7:	  0006	78 00		mov r0,#0h
    8:	  0008	79 00		mov r1,#0h
    9:	  000A	7A 00		mov r2,#0h
   10:	  000C	7B 00		mov r3,#0h
   11:	  000E	7C 00		mov r4,#0h
   12:	  0010	7D 00		mov r5,#0h
   13:	  0012	7E 00		mov r6,#0h
   14:	  0014	7F 00		mov r7,#0h
   15:	  0016	75 32 00	mov 32h,#0h
   16:	  0019	74 38				MOV	A, #38H			;init. LCD 2 lines, 5x7 matrix
   17:	  001B	12 01 85			LCALL	COMMAND		;call command subroutine
   18:	  001E	12 01 B6			LCALL DELAY			;give LCD some time
   19:	  0021	74 0E				MOV 	A, #0EH			;dispplay on, cursor on
   20:	  0023	12 01 85			LCALL	COMMAND		;call command subroutine
   21:	  0026	12 01 B6			LCALL 	DELAY			;give LCD some time
   22:	  0029	74 01				MOV	A, #01			;clear LCD
   23:	  002B	12 01 85			LCALL	COMMAND		;call command subroutine
   24:	  002E	12 01 B6			LCALL 	DELAY			;give LCD some time
   25:	  0031	74 06				MOV	A, #06H			;shift cursor right
   26:	  0033	12 01 85			LCALL	COMMAND		;call command subroutine
   27:	  0036	12 01 B6			LCALL 	DELAY			;give LCD some time
   28:	  0039	74 82				MOV	A, #82H			;cursor at line 1 postion 1
   29:	  003B	12 01 85			LCALL	COMMAND		;call command subroutine
   30:	  003E	12 01 B6			LCALL DELAY			;give LCD some time
   31:	  0041	31 B6				ACALL 	DELAY
   32:
   33:	  0043	74 84				MOV A, #084H
   34:	  0045	31 85				ACALL 	COMMAND
   35:	  0047	31 B6				ACALL 	DELAY
   36:	  0049	E4				CLR 	A
   37:	  004A	74 3A				MOV	A,#3ah
   38:	  004C	12 01 95			LCALL 	DISPLAY
   39:	  004F	12 01 B6			LCALL 	DELAY
   40:
   41:	  0052	74 87				MOV A, #087H
   42:	  0054	31 85				ACALL 	COMMAND
   43:	  0056	31 B6				ACALL 	DELAY

ASEM-51 V1.3                                         Copyright (c) 2002 by W.W. Heinz                                         PAGE 2



 Line  I  Addr  Code            Source

   44:	  0058	E4				CLR 	A
   45:	  0059	74 3A				MOV	A,#3ah
   46:	  005B	12 01 95			LCALL 	DISPLAY
   47:	  005E	12 01 B6			LCALL 	DELAY
   48:	  0061	90 01 E8			MOV DPTR, #day
   49:	  0064	85 82 43			mov 43h, dpl
   50:	  0067	85 82 32			mov 32h,dpl
   51:						; day as extra feature
   52:	  006A	90 01 E8			MOV DPTR, #day
   53:	  006D	75 41 C2			mov 41h,#0c2H
   54:	  0070	75 40 03			mov 40h,#3
   55:	  0073	E5 41		l12:		MOV A, 41h
   56:	  0075	85 32 82			mov dpl,32h
   57:	  0078	31 85				ACALL 	COMMAND
   58:	  007A	31 B6				ACALL 	DELAY
   59:	  007C	E4				CLR 	A
   60:	  007D	93				MOVC 	A,@A+DPTR
   61:	  007E	85 82 32			mov 32h,dpl
   62:	  0081	05 32				inc 32h
   63:	  0083	60 65				jz dayFINISH
   64:	  0085	12 01 95			LCALL 	DISPLAY
   65:	  0088	12 01 B6			LCALL 	DELAY
   66:	  008B	05 41				inc 41h
   67:	  008D	D5 40 E3			djnz 40h,l12
   68:
   69:	  0090	90 01 CE	start:		MOV DPTR, #MSG_1
   70:	  0093			LOOP_1:
   71:	  0093	74 82				MOV A, #082H
   72:	  0095	31 85				ACALL 	COMMAND
   73:	  0097	31 B6				ACALL 	DELAY
   74:	  0099	E4				CLR 	A
   75:	  009A	93				MOVC 	A,@A+DPTR
   76:	  009B	F5 30				mov 30h,a
   77:	  009D	A8 82				mov r0,dpl
   78:	  009F	60 58				jz FINISH_12
   79:	  00A1	12 01 95			LCALL 	DISPLAY
   80:	  00A4	12 01 B6			LCALL 	DELAY
   81:	  00A7	08				inc r0
   82:
   83:
   84:
   85:	  00A8	90 01 D2			mov dptr, #MSG_2
   86:	  00AB			LOOP_2:
   87:	  00AB	74 83				MOV A, #083H
   88:	  00AD	31 85				ACALL 	COMMAND
   89:	  00AF	31 B6				ACALL 	DELAY
   90:	  00B1	E4				CLR 	A
   91:	  00B2	93				MOVC 	A,@A+DPTR
   92:	  00B3	A9 82				mov r1,dpl
   93:	  00B5	60 61				jz FINISH_21
   94:	  00B7	F5 31				mov 31h,a
   95:	  00B9	B4 34 33			cjne a,#34h,check_four
   96:	  00BC	E5 30				mov a,30h
   97:	  00BE	B4 32 2E			cjne a,#32h,check_four
   98:
   99:						; day as extra feature

ASEM-51 V1.3                                         Copyright (c) 2002 by W.W. Heinz                                         PAGE 3



 Line  I  Addr  Code            Source

  100:	  00C1	90 01 E8			MOV DPTR, #day
  101:	  00C4	75 41 C2			mov 41h,#0c2H
  102:	  00C7	75 40 03			mov 40h,#3
  103:	  00CA	E5 41		l1:		MOV A, 41h
  104:	  00CC	85 32 82			mov dpl,32h
  105:	  00CF	31 85				ACALL 	COMMAND
  106:	  00D1	31 B6				ACALL 	DELAY
  107:	  00D3	E4				CLR 	A
  108:	  00D4	93				MOVC 	A,@A+DPTR
  109:	  00D5	85 82 32			mov 32h,dpl
  110:	  00D8	05 32				inc 32h
  111:	  00DA	60 0E				jz dayFINISH
  112:	  00DC	12 01 95			LCALL 	DISPLAY
  113:	  00DF	12 01 B6			LCALL 	DELAY
  114:	  00E2	05 41				inc 41h
  115:	  00E4	D5 40 E3			djnz 40h,l1
  116:
  117:	  00E7	02 00 90			ljmp start
  118:	  00EA			dayFINISH:
  119:	  00EA	85 43 32			mov 32h,43h
  120:	  00ED	80 DB				sjmp l1
  121:
  122:	  00EF	E5 31		check_four:	mov a,31h
  123:	  00F1	12 01 95			LCALL 	DISPLAY
  124:	  00F4	12 01 B6			LCALL 	DELAY
  125:	  00F7	80 03				sjmp a1
  126:	  00F9	02 01 82	FINISH_12:	ljmp FINISH_1
  127:	  00FC			a1:
  128:				;		min loop start
  129:	  00FC	90 01 D2			mov dptr, #MSG_2
  130:	  00FF			min1:
  131:	  00FF	74 85				MOV A, #085H
  132:	  0101	31 85				ACALL 	COMMAND
  133:	  0103	31 B6				ACALL 	DELAY
  134:	  0105	E4				CLR 	A
  135:	  0106	93				MOVC 	A,@A+DPTR
  136:	  0107	B4 36 02			cjne a,#36h,check_six
  137:	  010A	80 6B				sjmp minend
  138:	  010C	F5 F0		check_six:	mov b,a
  139:	  010E	AA 82				mov r2,dpl
  140:	  0110	12 01 95			LCALL 	DISPLAY
  141:	  0113	12 01 B6			LCALL 	DELAY
  142:
  143:	  0116	80 03				sjmp a2
  144:	  0118	02 01 7D	FINISH_21:	ljmp FINISH_2
  145:	  011B			a2:
  146:
  147:
  148:	  011B	0A		secend:		inc r2
  149:	  011C	90 01 D2			mov dptr, #MSG_2
  150:	  011F			min2:
  151:	  011F	74 86				MOV A, #086H
  152:	  0121	31 85				ACALL 	COMMAND
  153:	  0123	31 B6				ACALL 	DELAY
  154:	  0125	E4				CLR 	A
  155:	  0126	93				MOVC 	A,@A+DPTR

ASEM-51 V1.3                                         Copyright (c) 2002 by W.W. Heinz                                         PAGE 4



 Line  I  Addr  Code            Source

  156:	  0127	AB 82				mov r3,dpl
  157:	  0129	60 47				jz minFINISH_3
  158:
  159:	  012B	12 01 95			LCALL 	DISPLAY
  160:	  012E	12 01 B6			LCALL 	DELAY
  161:
  162:
  163:				;		second loop start
  164:	  0131	90 01 DD			mov dptr, #MSG_3
  165:	  0134			sec1:
  166:	  0134	74 88				MOV A, #088H
  167:	  0136	31 85				ACALL 	COMMAND
  168:	  0138	31 B6				ACALL 	DELAY
  169:	  013A	E4				CLR 	A
  170:	  013B	93				MOVC 	A,@A+DPTR
  171:	  013C	B4 36 02			cjne a,#36h,check_six_sec
  172:	  013F	80 2B				sjmp second
  173:	  0141	F5 F0		check_six_sec:	mov b,a
  174:	  0143	AE 82				mov r6,dpl
  175:	  0145	12 01 95			LCALL 	DISPLAY
  176:	  0148	12 01 B6			LCALL 	DELAY
  177:	  014B	0E				inc r6
  178:	  014C	90 01 DD			mov dptr, #MSG_3
  179:	  014F			sec2:
  180:	  014F	74 89				MOV A, #089H
  181:	  0151	31 85				ACALL 	COMMAND
  182:	  0153	31 B6				ACALL 	DELAY
  183:	  0155	E4				CLR 	A
  184:	  0156	93				MOVC 	A,@A+DPTR
  185:	  0157	AF 82				mov r7,dpl
  186:	  0159	60 0C				jz secFINISH_3
  187:
  188:	  015B	12 01 95			LCALL 	DISPLAY
  189:	  015E	12 01 BF			LCALL 	DELAYsec	;call another delay here like delaysec and calculate this de
				lay to make it 1 sec... and primary code will be done
  190:	  0161	0F				inc r7
  191:	  0162	8F 82				mov dpl,r7
  192:	  0164	02 01 4F			ljmp sec2
  193:	  0167			secFINISH_3:
  194:	  0167	8E 82				mov dpl,r6
  195:	  0169	02 01 34			ljmp sec1
  196:
  197:	  016C			second:		;sec END
  198:	  016C	0B				inc r3
  199:	  016D	8B 82				mov dpl,r3
  200:	  016F	02 01 1F			ljmp min2
  201:	  0172			minFINISH_3:
  202:	  0172	8A 82				mov dpl,r2
  203:	  0174	02 00 FF			ljmp min1
  204:
  205:						;min END
  206:	  0177	09		minend:		inc r1
  207:	  0178	89 82				mov dpl,r1
  208:	  017A	02 00 AB			ljmp LOOP_2
  209:
  210:

ASEM-51 V1.3                                         Copyright (c) 2002 by W.W. Heinz                                         PAGE 5



 Line  I  Addr  Code            Source

  211:	  017D			FINISH_2:
  212:	  017D	88 82				mov dpl,r0
  213:	  017F	02 00 93			ljmp LOOP_1
  214:	  0182			FINISH_1:
  215:	  0182	02 00 90			ljmp start
  216:
  217:
  218:	  0185			COMMAND:
  219:	  0185	12 01 A6			LCALL READY
  220:	  0188	F5 A0		 		MOV P2,A
  221:	  018A	C2 B3				CLR P3.3
  222:	  018C	C2 B4				CLR P3.4
  223:	  018E	D2 B5				SETB P3.5
  224:	  0190	31 B6				ACALL DELAY
  225:	  0192	C2 B5				CLR P3.5
  226:	  0194	22				RET
  227:	  0195			DISPLAY:
  228:	  0195	12 01 A6			LCALL 	READY
  229:	  0198	F5 A0				MOV P2, A
  230:	  019A	D2 B3				SETB 	RS
  231:	  019C	C2 B4			  	CLR 	RW
  232:	  019E	D2 B5				SETB 	ENBL
  233:	  01A0	12 01 B6			LCALL 	DELAY
  234:	  01A3	C2 B5			  	CLR 	ENBL
  235:	  01A5	22				RET
  236:
  237:	  01A6			READY:
  238:	  01A6	D2 A7				SETB 	P2.7
  239:	  01A8	C2 B3		 		CLR 	RS
  240:	  01AA	D2 B4		  		SETB 	RW
  241:	  01AC			WAIT:
  242:	  01AC	C2 B5				CLR 	ENBL
  243:	  01AE	31 B6				ACALL 	DELAY
  244:	  01B0	D2 B5		  		SETB 	ENBL
  245:	  01B2	20 A7 F7			JB 	P2.7, WAIT
  246:	  01B5	22		   		RET
  247:	  01B6			DELAY:
  248:	  01B6	7D 32				MOV 	R5, #50
  249:	  01B8			AGAIN_21:
  250:	  01B8	7C 64				MOV 	R4, #100
  251:	  01BA			AGAIN11:
  252:	  01BA	DC FE				DJNZ 	R4, AGAIN11
  253:	  01BC	DD FA				DJNZ R5, AGAIN_21
  254:	  01BE	22				RET
  255:
  256:	  01BF			DELAYsec:
  257:	  01BF	75 45 0A			mov 45h, #10
  258:	  01C2			AGAIN_3:
  259:	  01C2	7D C8				MOV 	R5, #200
  260:	  01C4			AGAIN_2:
  261:	  01C4	7C E6				MOV 	R4, #230
  262:	  01C6			AGAIN:
  263:	  01C6	DC FE				DJNZ 	R4, AGAIN
  264:	  01C8	DD FA				DJNZ R5, AGAIN_2
  265:	  01CA	D5 45 F5			djnz 45h,AGAIN_3
  266:	  01CD	22				RET

ASEM-51 V1.3                                         Copyright (c) 2002 by W.W. Heinz                                         PAGE 6



 Line  I  Addr  Code            Source

  267:
  268:	  01CE			MSG_1:
  269:	  01CE	30 31 32 00			DB "012",0
  270:
  271:	  01D2			MSG_2:
  272:	  01D2	30 31 32 33			DB "0123456789",0
	  01D6	34 35 36 37
	  01DA	38 39 00
  273:
  274:	  01DD			MSG_3:
  275:	  01DD	30 31 32 33			DB "0123456789",0
	  01E1	34 35 36 37
	  01E5	38 39 00
  276:	  01E8			day:
  277:	  01E8	73 61 74 73			DB 'satsunmontuewedthufri',0
	  01EC	75 6E 6D 6F
	  01F0	6E 74 75 65
	  01F4	77 65 64 74
	  01F8	68 75 66 72
	  01FC	69 00
  278:						END





                     register banks used:  ---

                     no errors




ASEM-51 V1.3                                         Copyright (c) 2002 by W.W. Heinz                                         PAGE 7





	       L I S T   O F   S Y M B O L S
	       =============================


SYMBOL				  TYPE     VALUE	LINE
------------------------------------------------------------
??ASEM_51			  NUMBER    8051
??VERSION			  NUMBER    0130
A1				  CODE	    00FC	 127
A2				  CODE	    011B	 145
AC				  BIT	      D6
ACC				  DATA	      E0
AGAIN				  CODE	    01C6	 262
AGAIN11				  CODE	    01BA	 251
AGAIN_2				  CODE	    01C4	 260
AGAIN_21			  CODE	    01B8	 249
AGAIN_3				  CODE	    01C2	 258
B				  DATA	      F0
CHECK_FOUR			  CODE	    00EF	 122
CHECK_SIX			  CODE	    010C	 138
CHECK_SIX_SEC			  CODE	    0141	 173
COMMAND				  CODE	    0185	 218
CY				  BIT	      D7
DAY				  CODE	    01E8	 276
DAYFINISH			  CODE	    00EA	 118
DELAY				  CODE	    01B6	 247
DELAYSEC			  CODE	    01BF	 256
DISPLAY				  CODE	    0195	 227
DPH				  DATA	      83
DPL				  DATA	      82
EA				  BIT	      AF
ENBL				  NUMBER    00B5	   6
ES				  BIT	      AC
ET0				  BIT	      A9
ET1				  BIT	      AB
EX0				  BIT	      A8
EX1				  BIT	      AA
EXTI0				  CODE	    0003
EXTI1				  CODE	    0013
F0				  BIT	      D5
FINISH_1			  CODE	    0182	 214
FINISH_12			  CODE	    00F9	 126
FINISH_2			  CODE	    017D	 211
FINISH_21			  CODE	    0118	 144
IE				  DATA	      A8
IE0				  BIT	      89
IE1				  BIT	      8B
INT0				  BIT	      B2
INT1				  BIT	      B3
IP				  DATA	      B8
IT0				  BIT	      88
IT1				  BIT	      8A
L1				  CODE	    00CA	 103
L12				  CODE	    0073	  55
LOOP_1				  CODE	    0093	  70
LOOP_2				  CODE	    00AB	  86

ASEM-51 V1.3                                         Copyright (c) 2002 by W.W. Heinz                                         PAGE 8



SYMBOL				  TYPE     VALUE	LINE
------------------------------------------------------------
MIN1				  CODE	    00FF	 130
MIN2				  CODE	    011F	 150
MINEND				  CODE	    0177	 206
MINFINISH_3			  CODE	    0172	 201
MSG_1				  CODE	    01CE	 268
MSG_2				  CODE	    01D2	 271
MSG_3				  CODE	    01DD	 274
OV				  BIT	      D2
P				  BIT	      D0
P0				  DATA	      80
P1				  DATA	      90
P2				  DATA	      A0
P3				  DATA	      B0
PCON				  DATA	      87
PS				  BIT	      BC
PSW				  DATA	      D0
PT0				  BIT	      B9
PT1				  BIT	      BB
PX0				  BIT	      B8
PX1				  BIT	      BA
RB8				  BIT	      9A
RD				  BIT	      B7
READY				  CODE	    01A6	 237
REN				  BIT	      9C
RESET				  CODE	    0000
RI				  BIT	      98
RS				  NUMBER    00B3	   4
RS0				  BIT	      D3
RS1				  BIT	      D4
RW				  NUMBER    00B4	   5
RXD				  BIT	      B0
SBUF				  DATA	      99
SCON				  DATA	      98
SEC1				  CODE	    0134	 165
SEC2				  CODE	    014F	 179
SECEND				  CODE	    011B	 148
SECFINISH_3			  CODE	    0167	 193
SECOND				  CODE	    016C	 197
SINT				  CODE	    0023
SM0				  BIT	      9F
SM1				  BIT	      9E
SM2				  BIT	      9D
SP				  DATA	      81
START				  CODE	    0090	  69
T0				  BIT	      B4
T1				  BIT	      B5
TB8				  BIT	      9B
TCON				  DATA	      88
TF0				  BIT	      8D
TF1				  BIT	      8F
TH0				  DATA	      8C
TH1				  DATA	      8D
TI				  BIT	      99
TIMER0				  CODE	    000B
TIMER1				  CODE	    001B
TL0				  DATA	      8A

ASEM-51 V1.3                                         Copyright (c) 2002 by W.W. Heinz                                         PAGE 9



SYMBOL				  TYPE     VALUE	LINE
------------------------------------------------------------
TL1				  DATA	      8B
TMOD				  DATA	      89
TR0				  BIT	      8C
TR1				  BIT	      8E
TXD				  BIT	      B1
WAIT				  CODE	    01AC	 241
WR				  BIT	      B6
